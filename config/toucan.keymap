#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>

#define BASE 0
#define NAV  1
#define SYM  2
#define ADJ  3

/ {
    conditional_layers {
        compatible = "zmk,conditional-layers";
        tri_layer {
            if-layers = <1 2>;
            then-layer = <3>;
        };
    };

    keymap {
        compatible = "zmk,keymap";

        base {
            display-name = "BASE";
            bindings = <
&kp TAB    &kp Q  &kp W  &kp E     &kp R       &kp T        &kp Y    &kp U            &kp I      &kp O    &kp P     &kp BSPC
&kp LCTRL  &kp A  &kp S  &kp D     &kp F       &kp G        &kp H    &kp J            &kp K      &kp L    &kp SEMI  &kp SQT
&kp LSHFT  &kp Z  &kp X  &kp C     &kp V       &kp B        &kp N    &kp M            &kp COMMA  &kp DOT  &kp FSLH  &kp ESC
                         &kp LGUI  &lt 1 LALT  &kp SPACE    &kp RET  &lt 2 BACKSPACE  &kp RALT
            >;
        };

        nav {
            display-name = "NAV";
            bindings = <
&kp ESC       &kp N1            &kp N2     &kp N3     &kp N4            &kp N5            &kp N6           &kp N7             &kp N8        &kp N9                &kp N0                 &kp BSPC
&kp CAPSLOCK  &kp EXCL          &kp AT     &kp HASH   &kp DOLLAR        &kp PERCENT       &kp CARET        &kp AMPERSAND      &kp ASTERISK  &kp LEFT_PARENTHESIS  &kp RIGHT_PARENTHESIS  &kp TILDE
&kp LSHFT     &studio_unlock    &kp TILDE  &kp GRAVE  &kp LEFT_BRACKET  &kp LEFT_BRACE    &kp RIGHT_BRACE  &kp RIGHT_BRACKET  &trans        &trans                &trans                 &kp PIPE
                                           &kp LGUI   &trans            &kp SPACE         &kp RET          &trans             &kp RALT
            >;
        };

        sym {
            display-name = "SYM";
            bindings = <
&kp ESC    &none     &none    &kp UNDER   &kp EQUAL    &kp PAGE_UP      &none             &none       &none       &kp BACKSLASH      &kp PIPE         &kp BSPC
&kp LCTRL  &kp HOME  &kp END  &kp MINUS   &kp PLUS     &kp PAGE_DOWN    &none             &kp LEFT    &kp DOWN    &kp UP_ARROW       &kp RIGHT        &kp RIGHT_GUI
&kp LSHFT  &trans    &trans   &kp K_COPY  &kp K_PASTE  &trans           &kp K_PLAY_PAUSE  &kp K_PREV  &kp K_NEXT  &kp C_VOLUME_DOWN  &kp C_VOLUME_UP  &kp BACKSLASH
                              &kp LGUI    &trans       &kp SPACE        &kp RET           &trans      &kp RALT
            >;
        };

        adj {
            display-name = "ADJ";
            bindings = <
&kp ESC     &kp F1        &kp F2        &kp F3        &kp F4        &kp F5          &kp F6           &kp F7        &kp F8        &kp F9            &kp F10        &kp F11
&bt BT_CLR  &bt BT_SEL 0  &bt BT_SEL 1  &bt BT_SEL 2  &bt BT_SEL 3  &bt BT_SEL 4    &trans           &kp LC(LEFT)  &kp LC(DOWN)  &kp LC(UP_ARROW)  &kp LC(RIGHT)  &kp F12
&kp LSHFT   &trans        &trans        &trans        &trans        &out OUT_TOG    &studio_unlock   &trans        &trans        &trans            &trans         &trans
                                        &kp LGUI      &trans        &kp SPACE       &kp RET          &trans        &kp RALT
            >;
        };
        extra_1 {
                status = "reserved";
        };

        extra_2 {
                status = "reserved";
        };

        extra_3 {
                status = "reserved";
        };
    };
};
